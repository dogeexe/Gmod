@name ACF Doggo v3.2 Last Public Version
@inputs Pod:wirelink Engine:entity
@outputs Throttle Gear On Brake
@persist [StartSound_Path HornSound_path]:string BreakForce
 
interval(100)

# How to Use #
# Link the input Engine:entity in your car engine.
# Link the input Pod:wirelink in your PodController.
# Link the input Throttle of your engine on the output 'Throttle' of the E2.
# Link the input 'Active' of your engine on the output 'On' of the E2.
# Link the input 'Gear' of your GearBox in the output 'Gear' of your E2.
# Link the input 'Brake' of your GearBox / Diffs in the output "Brake" of your E2.

# If the break start glitching just place a lower value on BreakForce ( Default = 5 ).
# If there is any problem with the E2 or ideas to the future versions please contact me.

# Steam : http://steamcommunity.com/id/dogaumexe/
# Discord : SadDoge.exe#3174

if(first()){
     
    # SETUP #
     
     BreakForce = 5

     StartSound_Path = "acf_extra/vehiclefx/starters/starter3.wav"
     HornSound_Path = "acf_extra/vehiclefx/horn/horn0.wav"

    # SETUP #

    hint("ACF Doggo v3.2 (Last Build) By SadDoge.exe", 5)
    owner():soundPlay(0,1,"buttons/bell1.wav")
}


W = Pod["W",number]
S = Pod["S",number]
Space = Pod["Space",number]
Alt = Pod["Alt",number]
Start = Pod["R",number]



# ========================== Gear ================================== #
 
if(W == 1){ 
   if(Gear == 6) { Gear = 1 Throttle = 100 } else { Throttle = 100 }
}
else{ 
   Throttle = 0
}
 
if(S == 1){ 
   Gear = 6 Throttle = 100
}

# ========================= Start Engine ============================ #

if (changed(Start) & Start){
    if( On ){
     On = 0
    }
else{
     Engine:soundPlay("Engine",0,StartSound_Path)
     timer("EngineOn",1100)
 }
}

if( clk("EngineOn") ){
    soundStop("Engine")
    On = 1
}

# ======================== Horn ==================================== #

if( changed(Alt) & Alt ){
    Engine:soundPlay(3,0,HornSound_Path)
}

# ======================== Break =================================== # 

if(Space){
   Brake=BreakForce
}
else{
   Brake=0
}
